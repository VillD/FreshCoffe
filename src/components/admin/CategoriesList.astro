---
import { CategoriesSchema } from "@/types"
import { currentPage } from "@/utils"

const url = await fetch(`${import.meta.env.API_URL}/freshcoffee_categories`)
const json = await url.json()
const categories = CategoriesSchema.parse(json)
const {category} = Astro.params;
---
<h2 class="text-xl mb-5">Categor√≠as: </h2>

<nav>
    <a href="/admin/products" class="text-white rounded-md px-3 p-2 mr-2 bg-indigo-400 hover:bg-indigo-500 transition-colors">
        Ver todos
    </a>

    {categories.map(cat => (
        <a href={`/admin/products/${cat.slug}`} class={`${currentPage(cat.slug, category!) ? 'bg-indigo-500' : 'bg-indigo-400'} text-white rounded-md px-3 p-2 mr-2 hover:bg-indigo-500 transition-colors`}>
            {cat.name}
        </a>
    ))}
</nav>